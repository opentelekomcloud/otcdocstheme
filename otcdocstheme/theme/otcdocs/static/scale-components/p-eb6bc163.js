const t=Math.min,n=Math.max,e=Math.round,o=t=>({x:t,y:t}),r={left:"right",right:"left",bottom:"top",top:"bottom"},i={start:"end",end:"start"};function a(e,o,r){return n(e,t(o,r))}function c(t,n){return"function"==typeof t?t(n):t}function l(t){return t.split("-")[0]}function s(t){return t.split("-")[1]}function u(t){return"x"===t?"y":"x"}function f(t){return"y"===t?"height":"width"}function d(t){return["top","bottom"].includes(l(t))?"y":"x"}function y(t){return u(d(t))}function m(t){return t.replace(/start|end/g,(t=>i[t]))}function p(t){return t.replace(/left|right|bottom|top/g,(t=>r[t]))}function x(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function g(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function h(t,n,e){let{reference:o,floating:r}=t;const i=d(n),a=y(n),c=f(a),u=l(n),m="y"===i,p=o.x+o.width/2-r.width/2,x=o.y+o.height/2-r.height/2,g=o[c]/2-r[c]/2;let h;switch(u){case"top":h={x:p,y:o.y-r.height};break;case"bottom":h={x:p,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:x};break;case"left":h={x:o.x-r.width,y:x};break;default:h={x:o.x,y:o.y}}switch(s(n)){case"start":h[a]-=g*(e&&m?-1:1);break;case"end":h[a]+=g*(e&&m?-1:1)}return h}async function w(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:i,rects:a,elements:l,strategy:s}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:y=!1,padding:m=0}=c(n,t),p=x(m),h=l[y?"floating"===d?"reference":"floating":d],w=g(await i.getClippingRect({element:null==(e=await(null==i.isElement?void 0:i.isElement(h)))||e?h:h.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:s})),v="floating"===d?{...a.floating,x:o,y:r}:a.reference,b=await(null==i.getOffsetParent?void 0:i.getOffsetParent(l.floating)),A=await(null==i.isElement?void 0:i.isElement(b))&&await(null==i.getScale?void 0:i.getScale(b))||{x:1,y:1},k=g(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:b,strategy:s}):v);return{top:(w.top-k.top+p.top)/A.y,bottom:(k.bottom-w.bottom+p.bottom)/A.y,left:(w.left-k.left+p.left)/A.x,right:(k.right-w.right+p.right)/A.x}}const v=n=>({name:"arrow",options:n,async fn(e){const{x:o,y:r,placement:i,rects:l,platform:u,elements:d,middlewareData:m}=e,{element:p,padding:g=0}=c(n,e)||{};if(null==p)return{};const h=x(g),w={x:o,y:r},v=y(i),b=f(v),A=await u.getDimensions(p),k="y"===v,S=k?"top":"left",R=k?"bottom":"right",P=k?"clientHeight":"clientWidth",D=l.reference[b]+l.reference[v]-w[v]-l.floating[b],T=w[v]-l.reference[v],C=await(null==u.getOffsetParent?void 0:u.getOffsetParent(p));let F=C?C[P]:0;F&&await(null==u.isElement?void 0:u.isElement(C))||(F=d.floating[P]||l.floating[b]);const L=D/2-T/2,B=F/2-A[b]/2-1,E=t(h[S],B),M=t(h[R],B),O=E,N=F-A[b]-M,H=F/2-A[b]/2+L,$=a(O,H,N),j=!m.arrow&&null!=s(i)&&H!=$&&l.reference[b]/2-(H<O?E:M)-A[b]/2<0,V=j?H<O?H-O:H-N:0;return{[v]:w[v]+V,data:{[v]:$,centerOffset:H-$-V,...j&&{alignmentOffset:V}},reset:j}}}),b=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(n){var e,o;const{placement:r,middlewareData:i,rects:a,initialPlacement:u,platform:d,elements:x}=n,{mainAxis:g=!0,crossAxis:h=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:k=!0,...S}=c(t,n);if(null!=(e=i.arrow)&&e.alignmentOffset)return{};const R=l(r),P=l(u)===u,D=await(null==d.isRTL?void 0:d.isRTL(x.floating)),T=v||(P||!k?[p(u)]:function(t){const n=p(t);return[m(t),n,m(n)]}(u));v||"none"===A||T.push(...function(t,n,e,o){const r=s(t);let i=function(t,n,e){const o=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return e?n?r:o:n?o:r;case"left":case"right":return n?i:a;default:return[]}}(l(t),"start"===e,o);return r&&(i=i.map((t=>t+"-"+r)),n&&(i=i.concat(i.map(m)))),i}(u,k,A,D));const C=[u,...T],F=await w(n,S),L=[];let B=(null==(o=i.flip)?void 0:o.overflows)||[];if(g&&L.push(F[R]),h){const t=function(t,n,e){void 0===e&&(e=!1);const o=s(t),r=y(t),i=f(r);let a="x"===r?o===(e?"end":"start")?"right":"left":"start"===o?"bottom":"top";return n.reference[i]>n.floating[i]&&(a=p(a)),[a,p(a)]}(r,a,D);L.push(F[t[0]],F[t[1]])}if(B=[...B,{placement:r,overflows:L}],!L.every((t=>t<=0))){var E,M;const t=((null==(E=i.flip)?void 0:E.index)||0)+1,n=C[t];if(n)return{data:{index:t,overflows:B},reset:{placement:n}};let e=null==(M=B.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])?void 0:M.placement;if(!e)switch(b){case"bestFit":{var O;const t=null==(O=B.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:O[0];t&&(e=t);break}case"initialPlacement":e=u}if(r!==e)return{reset:{placement:e}}}return{}}}},A=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(n){const{x:e,y:o}=n,r=await async function(t,n){const{placement:e,platform:o,elements:r}=t,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),a=l(e),u=s(e),f="y"===d(e),y=["left","top"].includes(a)?-1:1,m=i&&f?-1:1,p=c(n,t);let{mainAxis:x,crossAxis:g,alignmentAxis:h}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return u&&"number"==typeof h&&(g="end"===u?-1*h:h),f?{x:g*m,y:x*y}:{x:x*y,y:g*m}}(n,t);return{x:e+r.x,y:o+r.y,data:r}}}},k=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(n){const{x:e,y:o,placement:r}=n,{mainAxis:i=!0,crossAxis:s=!1,limiter:f={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...y}=c(t,n),m={x:e,y:o},p=await w(n,y),x=d(l(r)),g=u(x);let h=m[g],v=m[x];i&&(h=a(h+p["y"===g?"top":"left"],h,h-p["y"===g?"bottom":"right"])),s&&(v=a(v+p["y"===x?"top":"left"],v,v-p["y"===x?"bottom":"right"]));const b=f.fn({...n,[g]:h,[x]:v});return{...b,data:{x:b.x-e,y:b.y-o}}}}};function S(t){return D(t)?(t.nodeName||"").toLowerCase():"#document"}function R(t){var n;return(null==t||null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function P(t){var n;return null==(n=(D(t)?t.ownerDocument:t.document)||window.document)?void 0:n.documentElement}function D(t){return t instanceof Node||t instanceof R(t).Node}function T(t){return t instanceof Element||t instanceof R(t).Element}function C(t){return t instanceof HTMLElement||t instanceof R(t).HTMLElement}function F(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof R(t).ShadowRoot)}function L(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=N(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!["inline","contents"].includes(r)}function B(t){return["table","td","th"].includes(S(t))}function E(t){const n=M(),e=N(t);return"none"!==e.transform||"none"!==e.perspective||!!e.containerType&&"normal"!==e.containerType||!n&&!!e.backdropFilter&&"none"!==e.backdropFilter||!n&&!!e.filter&&"none"!==e.filter||["transform","perspective","filter"].some((t=>(e.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(e.contain||"").includes(t)))}function M(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function O(t){return["html","body","#document"].includes(S(t))}function N(t){return R(t).getComputedStyle(t)}function H(t){return T(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function $(t){if("html"===S(t))return t;const n=t.assignedSlot||t.parentNode||F(t)&&t.host||P(t);return F(n)?n.host:n}function j(t){const n=$(t);return O(n)?t.ownerDocument?t.ownerDocument.body:t.body:C(n)&&L(n)?n:j(n)}function V(t,n,e){var o;void 0===n&&(n=[]),void 0===e&&(e=!0);const r=j(t),i=r===(null==(o=t.ownerDocument)?void 0:o.body),a=R(r);return i?n.concat(a,a.visualViewport||[],L(r)?r:[],a.frameElement&&e?V(a.frameElement):[]):n.concat(r,V(r,[],e))}function W(t){const n=N(t);let o=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const i=C(t),a=i?t.offsetWidth:o,c=i?t.offsetHeight:r,l=e(o)!==a||e(r)!==c;return l&&(o=a,r=c),{width:o,height:r,$:l}}function X(t){return T(t)?t:t.contextElement}function Y(t){const n=X(t);if(!C(n))return o(1);const r=n.getBoundingClientRect(),{width:i,height:a,$:c}=W(n);let l=(c?e(r.width):r.width)/i,s=(c?e(r.height):r.height)/a;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}const _=o(0);function q(t){const n=R(t);return M()&&n.visualViewport?{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}:_}function z(t,n,e,r){void 0===n&&(n=!1),void 0===e&&(e=!1);const i=t.getBoundingClientRect(),a=X(t);let c=o(1);n&&(r?T(r)&&(c=Y(r)):c=Y(t));const l=function(t,n,e){return void 0===n&&(n=!1),!(!e||n&&e!==R(t))&&n}(a,e,r)?q(a):o(0);let s=(i.left+l.x)/c.x,u=(i.top+l.y)/c.y,f=i.width/c.x,d=i.height/c.y;if(a){const t=R(a),n=r&&T(r)?R(r):r;let e=t.frameElement;for(;e&&r&&n!==t;){const t=Y(e),n=e.getBoundingClientRect(),o=N(e),r=n.left+(e.clientLeft+parseFloat(o.paddingLeft))*t.x,i=n.top+(e.clientTop+parseFloat(o.paddingTop))*t.y;s*=t.x,u*=t.y,f*=t.x,d*=t.y,s+=r,u+=i,e=R(e).frameElement}}return g({width:f,height:d,x:s,y:u})}function G(t){return z(P(t)).left+H(t).scrollLeft}function I(t,e,r){let i;if("viewport"===e)i=function(t,n){const e=R(t),o=P(t),r=e.visualViewport;let i=o.clientWidth,a=o.clientHeight,c=0,l=0;if(r){i=r.width,a=r.height;const t=M();(!t||t&&"fixed"===n)&&(c=r.offsetLeft,l=r.offsetTop)}return{width:i,height:a,x:c,y:l}}(t,r);else if("document"===e)i=function(t){const e=P(t),o=H(t),r=t.ownerDocument.body,i=n(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=n(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-o.scrollLeft+G(t);const l=-o.scrollTop;return"rtl"===N(r).direction&&(c+=n(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:c,y:l}}(P(t));else if(T(e))i=function(t,n){const e=z(t,!0,"fixed"===n),r=e.top+t.clientTop,i=e.left+t.clientLeft,a=C(t)?Y(t):o(1);return{width:t.clientWidth*a.x,height:t.clientHeight*a.y,x:i*a.x,y:r*a.y}}(e,r);else{const n=q(t);i={...e,x:e.x-n.x,y:e.y-n.y}}return g(i)}function J(t,n){const e=$(t);return!(e===n||!T(e)||O(e))&&("fixed"===N(e).position||J(e,n))}function K(t,n,e){const r=C(n),i=P(n),a="fixed"===e,c=z(t,!0,a,n);let l={scrollLeft:0,scrollTop:0};const s=o(0);if(r||!r&&!a)if(("body"!==S(n)||L(i))&&(l=H(n)),r){const t=z(n,!0,a,n);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}else i&&(s.x=G(i));return{x:c.left+l.scrollLeft-s.x,y:c.top+l.scrollTop-s.y,width:c.width,height:c.height}}function Q(t,n){return C(t)&&"fixed"!==N(t).position?n?n(t):t.offsetParent:null}function U(t,n){const e=R(t);if(!C(t))return e;let o=Q(t,n);for(;o&&B(o)&&"static"===N(o).position;)o=Q(o,n);return o&&("html"===S(o)||"body"===S(o)&&"static"===N(o).position&&!E(o))?e:o||function(t){let n=$(t);for(;C(n)&&!O(n);){if(E(n))return n;n=$(n)}return null}(t)||e}const Z={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:n,offsetParent:e,strategy:r}=t;const i=C(e),a=P(e);if(e===a)return n;let c={scrollLeft:0,scrollTop:0},l=o(1);const s=o(0);if((i||!i&&"fixed"!==r)&&(("body"!==S(e)||L(a))&&(c=H(e)),C(e))){const t=z(e);l=Y(e),s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+s.x,y:n.y*l.y-c.scrollTop*l.y+s.y}},getDocumentElement:P,getClippingRect:function(e){let{element:o,boundary:r,rootBoundary:i,strategy:a}=e;const c=[..."clippingAncestors"===r?function(t,n){const e=n.get(t);if(e)return e;let o=V(t,[],!1).filter((t=>T(t)&&"body"!==S(t))),r=null;const i="fixed"===N(t).position;let a=i?$(t):t;for(;T(a)&&!O(a);){const n=N(a),e=E(a);e||"fixed"!==n.position||(r=null),(i?!e&&!r:!e&&"static"===n.position&&r&&["absolute","fixed"].includes(r.position)||L(a)&&!e&&J(t,a))?o=o.filter((t=>t!==a)):r=n,a=$(a)}return n.set(t,o),o}(o,this._c):[].concat(r),i],l=c.reduce(((e,r)=>{const i=I(o,r,a);return e.top=n(i.top,e.top),e.right=t(i.right,e.right),e.bottom=t(i.bottom,e.bottom),e.left=n(i.left,e.left),e}),I(o,c[0],a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:U,getElementRects:async function(t){let{reference:n,floating:e,strategy:o}=t;const r=this.getOffsetParent||U,i=this.getDimensions;return{reference:K(n,await r(e),o),floating:{x:0,y:0,...await i(e)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return W(t)},getScale:Y,isElement:T,isRTL:function(t){return"rtl"===N(t).direction}},tt=(t,n,e)=>{const o=new Map,r={platform:Z,...e},i={...r.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:a}=e,c=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(n));let s=await a.getElementRects({reference:t,floating:n,strategy:r}),{x:u,y:f}=h(s,o,l),d=o,y={},m=0;for(let e=0;e<c.length;e++){const{name:i,fn:p}=c[e],{x,y:g,data:w,reset:v}=await p({x:u,y:f,initialPlacement:o,placement:d,strategy:r,middlewareData:y,rects:s,platform:a,elements:{reference:t,floating:n}});u=null!=x?x:u,f=null!=g?g:f,y={...y,[i]:{...y[i],...w}},v&&m<=50&&(m++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(s=!0===v.rects?await a.getElementRects({reference:t,floating:n,strategy:r}):v.rects),({x:u,y:f}=h(s,d,l))),e=-1)}return{x:u,y:f,placement:d,strategy:r,middlewareData:y}})(t,n,{...r,platform:i})};export{v as a,tt as c,b as f,A as o,Z as p,k as s}